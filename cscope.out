cscope 15 $HOME/graph-query-engine               0000013317
	@greeter_async_client2.cc

19 
	~<io¡»am
>

20 
	~<memÜy
>

21 
	~<¡ršg
>

23 
	~<g½ıp/g½ıp.h
>

24 
	~<g½c/suµÜt/log.h
>

25 
	~<th»ad
>

27 #ifdeà
BAZEL_BUILD


28 
	~"exam¶es/´Ùos/h–lowÜld.g½c.pb.h
"

30 
	~"h–lowÜld.g½c.pb.h
"

33 
usšg
 
	gg½c
::
ChªÃl
;

34 
usšg
 
	gg½c
::
Cl›ÁAsyncRe¥Ú£R—d”
;

35 
usšg
 
	gg½c
::
Cl›ÁCÚ‹xt
;

36 
usšg
 
	gg½c
::
Com¶‘iÚQueue
;

37 
usšg
 
	gg½c
::
Stus
;

38 
usšg
 
	gh–lowÜld
::
H–loReque¡
;

39 
usšg
 
	gh–lowÜld
::
H–loR•ly
;

40 
usšg
 
	gh–lowÜld
::
G»‘”
;

42 şas 
	cG»‘”Cl›Á
 {

43 
	mpublic
:

44 
ex¶ic™
 
G»‘”Cl›Á
(
¡d
::
sh¬ed_±r
<
ChªÃl
> 
chªÃl
)

45 : 
¡ub_
(
G»‘”
::
	$NewStub
(
chªÃl
)) {}

48 
	$SayH–lo
(cÚ¡ 
¡d
::
¡ršg
& 
u£r
) {

50 
H–loReque¡
 
»que¡
;

51 
»que¡
.
	`£t_Çme
(
u£r
);

54 
AsyncCl›ÁC®l
* 
ÿÎ
 = 
Ãw
 AsyncClientCall;

60 
ÿÎ
->
»¥Ú£_»ad”
 =

61 
¡ub_
->
	`P»·»AsyncSayH–lo
(&
ÿÎ
->
cÚ‹xt
, 
»que¡
, &
cq_
);

64 
ÿÎ
->
»¥Ú£_»ad”
->
	`S¹C®l
();

69 
ÿÎ
->
»¥Ú£_»ad”
->
	`Fšish
(&ÿÎ->
»¶y
, &ÿÎ->
¡©us
, (*)call);

71 
	}
}

75 
	$AsyncCom¶‘eRpc
() {

76 * 
gÙ_g
;

77 
boŞ
 
ok
 = 
çl£
;

80 
cq_
.
	`Next
(&
gÙ_g
, &
ok
)) {

82 
AsyncCl›ÁC®l
* 
ÿÎ
 = 
¡©ic_ÿ¡
<AsyncCl›ÁC®l*>(
gÙ_g
);

86 
	`GPR_ASSERT
(
ok
);

88 ià(
ÿÎ
->
¡©us
.
	`ok
())

89 
¡d
::
cout
 << "G»‘”„eûived: " << 
ÿÎ
->
»¶y
.
	`mes§ge
(è<< std::
’dl
;

91 
¡d
::
cout
 << "RPC faed" << std::
’dl
;

94 
d–‘e
 
ÿÎ
;

96 
	}
}

98 
	g´iv©e
:

101 
	sAsyncCl›ÁC®l
 {

103 
H–loR•ly
 
»¶y
;

107 
Cl›ÁCÚ‹xt
 
	gcÚ‹xt
;

110 
Stus
 
	g¡©us
;

113 
	g¡d
::
unique_±r
<
Cl›ÁAsyncRe¥Ú£R—d”
<
H–loR•ly
>> 
»¥Ú£_»ad”
;

118 
	g¡d
::
unique_±r
<
G»‘”
::
Stub
> 
¡ub_
;

122 
Com¶‘iÚQueue
 
	gcq_
;

125 
	$maš
(
¬gc
, ** 
¬gv
) {

132 
G»‘”Cl›Á
 
	`g»‘”
(
g½c
::
	`C»©eChªÃl
(

133 "loÿlho¡:50051", 
g½c
::
	`In£cu»ChªÃlC»d’tŸls
()));

136 
¡d
::
th»ad
 
th»ad_
 = std::
	`th»ad
(&
G»‘”Cl›Á
::
AsyncCom¶‘eRpc
, &
g»‘”
);

138 
i
 = 0; i < 100; i++) {

139 
¡d
::
¡ršg
 
	`u£r
("wÜld " + std::
	`to_¡ršg
(
i
));

140 
g»‘”
.
	`SayH–lo
(
u£r
);

143 
¡d
::
cout
 << "P»s cÚŒŞ-øtØqu™" << std::
’dl
 << std::endl;

144 
th»ad_
.
	`još
();

147 
	}
}

	@src/async_client.cc

19 
	~<io¡»am
>

20 
	~<memÜy
>

21 
	~<¡ršg
>

22 
	~<veùÜ
>

24 
	~<g½ıp/g½ıp.h
>

25 
	~<g½c/suµÜt/log.h
>

26 
	~<th»ad
>

28 #ifdeà
BAZEL_BUILD


29 
	~"´Ùos/g¿ph.g½c.pb.h
"

30 
	~"šşude/g¿ph.h
"

32 
	~"g¿ph.g½c.pb.h
"

35 
usšg
 
	gg½c
::
ChªÃl
;

36 
usšg
 
	gg½c
::
Cl›ÁAsyncRe¥Ú£R—d”
;

37 
usšg
 
	gg½c
::
Cl›ÁCÚ‹xt
;

38 
usšg
 
	gg½c
::
Com¶‘iÚQueue
;

39 
usšg
 
	gg½c
::
Stus
;

40 
usšg
 
	gg¿ph
::
Reque¡
;

41 
usšg
 
	gg¿ph
::
Re¥Ú£
;

42 
usšg
 
	gg¿ph
::
G¿phEngše
;

44 şas 
	cG¿phEngšeCl›Á
 {

45 
	mpublic
:

46 
ex¶ic™
 
G¿phEngšeCl›Á
(
¡d
::
sh¬ed_±r
<
ChªÃl
> 
chªÃl
)

47 : 
¡ub_
(
G¿phEngše
::
	$NewStub
(
chªÃl
)) {}

50 
	`Po¡G¿phReque¡
(cÚ¡ 
¡d
::
¡ršg
& 
g¿ph_Çme
,

51 
¡d
::
veùÜ
<
G¿phQu”yEngše
::
G¿ph
::
Edge
>& 
adj_li¡
) {

53 
¡d
::
cout
<<"adjli¡ size"<<
adj_li¡
.
	`size
()<<¡d::
’dl
;

55 
Reque¡
 
»que¡
;

56 
»que¡
.
	`£t_g¿ph_Çme
(
g¿ph_Çme
);

57 
»que¡
.
	`£t_»que¡_ty³
(
g¿ph
::
POST_GRAPH
);

60 autØ
šput_edge
 : 
adj_li¡
) {

61 
g¿ph
::
Edges
* 
edge
 = 
»que¡
.
	`add_adjaûncy_li¡
();

62 
edge
->
	`£t_¤c
(
šput_edge
.
¤c
);

63 
edge
->
	`£t_de¡
(
šput_edge
.
de¡
);

67 
AsyncCl›ÁC®l
* 
ÿÎ
 = 
Ãw
 AsyncClientCall;

73 
ÿÎ
->
»¥Ú£_»ad”
 =

74 
¡ub_
->
	`P»·»AsyncG¿phEngšeReque¡
(&
ÿÎ
->
cÚ‹xt
, 
»que¡
, &
cq_
);

77 
ÿÎ
->
»¥Ú£_»ad”
->
	`S¹C®l
();

82 
ÿÎ
->
»¥Ú£_»ad”
->
	`Fšish
(&ÿÎ->
»¶y
, &ÿÎ->
¡©us
, (*)call);

84 
	}
}

87 
	$D–‘eG¿phReque¡
(cÚ¡ 
ušt32_t
& 
g¿ph_id
) {

88 
Reque¡
 
»que¡
;

89 
»que¡
.
	`£t_»que¡_ty³
(
g¿ph
::
DELETE_GRAPH
);

90 
g¿ph
::
D–‘eG¿ph
* 
d–‘e_g¿ph
 = 
»que¡
.
	`add_d–‘e_g¿ph
();

91 
d–‘e_g¿ph
->
	`£t_m­_id
(
g¿ph_id
);

94 
AsyncCl›ÁC®l
* 
ÿÎ
 = 
Ãw
 AsyncClientCall;

100 
ÿÎ
->
»¥Ú£_»ad”
 =

101 
¡ub_
->
	`P»·»AsyncG¿phEngšeReque¡
(&
ÿÎ
->
cÚ‹xt
, 
»que¡
, &
cq_
);

104 
ÿÎ
->
»¥Ú£_»ad”
->
	`S¹C®l
();

109 
ÿÎ
->
»¥Ú£_»ad”
->
	`Fšish
(&ÿÎ->
»¶y
, &ÿÎ->
¡©us
, (*)call);

111 
	}
}

115 
	$AsyncCom¶‘eRpc
() {

116 * 
gÙ_g
;

117 
boŞ
 
ok
 = 
çl£
;

120 
cq_
.
	`Next
(&
gÙ_g
, &
ok
)) {

122 
AsyncCl›ÁC®l
* 
ÿÎ
 = 
¡©ic_ÿ¡
<AsyncCl›ÁC®l*>(
gÙ_g
);

126 
	`GPR_ASSERT
(
ok
);

128 ià(
ÿÎ
->
¡©us
.
	`ok
())

129 
¡d
::
cout
 << "G»‘”„eûived: " << 
ÿÎ
->
»¶y
.
	`mes§ge
(è<< std::
’dl
;

131 
¡d
::
cout
 << "RPC faed" << std::
’dl
;

134 
d–‘e
 
ÿÎ
;

136 
	}
}

138 
	g´iv©e
:

141 
	sAsyncCl›ÁC®l
 {

143 
Re¥Ú£
 
»¶y
;

147 
Cl›ÁCÚ‹xt
 
	gcÚ‹xt
;

150 
Stus
 
	g¡©us
;

153 
	g¡d
::
unique_±r
<
Cl›ÁAsyncRe¥Ú£R—d”
<
Re¥Ú£
>> 
»¥Ú£_»ad”
;

158 
	g¡d
::
unique_±r
<
G¿phEngše
::
Stub
> 
¡ub_
;

162 
Com¶‘iÚQueue
 
	gcq_
;

165 
	$maš
(
¬gc
, ** 
¬gv
) {

172 
G¿phEngšeCl›Á
 
	`g¿ph_ş›Á
(
g½c
::
	`C»©eChªÃl
(

173 "loÿlho¡:50051", 
g½c
::
	`In£cu»ChªÃlC»d’tŸls
()));

176 
¡d
::
th»ad
 
th»ad_
 = std::
	`th»ad
(&
G¿phEngšeCl›Á
::
AsyncCom¶‘eRpc
, &
g¿ph_ş›Á
);

180 
¡d
::
veùÜ
<
G¿phQu”yEngše
::
G¿ph
::
Edge
> 
adj_li¡
;

181 
adj_li¡
.
	`push_back
(
G¿phQu”yEngše
::
G¿ph
::
	`Edge
(0,1));

182 
adj_li¡
.
	`push_back
(
G¿phQu”yEngše
::
G¿ph
::
	`Edge
(1,2));

184 
¡d
::
¡ršg
 
g¿ph_Çme
 = "site_network";

185 
g¿ph_ş›Á
.
	`Po¡G¿phReque¡
(
g¿ph_Çme
, 
adj_li¡
);

194 
¡d
::
cout
 << "P»s cÚŒŞ-øtØqu™" << std::
’dl
 << std::endl;

195 
th»ad_
.
	`još
();

198 
	}
}

	@src/greeter_async_client.cc

19 
	~<io¡»am
>

20 
	~<memÜy
>

21 
	~<¡ršg
>

23 
	~<g½ıp/g½ıp.h
>

24 
	~<g½c/suµÜt/log.h
>

26 #ifdeà
BAZEL_BUILD


27 
	~"´Ùos/h–lowÜld.g½c.pb.h
"

29 
	~"h–lowÜld.g½c.pb.h
"

32 
usšg
 
	gg½c
::
ChªÃl
;

33 
usšg
 
	gg½c
::
Cl›ÁAsyncRe¥Ú£R—d”
;

34 
usšg
 
	gg½c
::
Cl›ÁCÚ‹xt
;

35 
usšg
 
	gg½c
::
Com¶‘iÚQueue
;

36 
usšg
 
	gg½c
::
Stus
;

37 
usšg
 
	gh–lowÜld
::
H–loReque¡
;

38 
usšg
 
	gh–lowÜld
::
H–loR•ly
;

39 
usšg
 
	gh–lowÜld
::
G»‘”
;

41 şas 
	cG»‘”Cl›Á
 {

42 
	mpublic
:

43 
ex¶ic™
 
G»‘”Cl›Á
(
¡d
::
sh¬ed_±r
<
ChªÃl
> 
chªÃl
)

44 : 
¡ub_
(
G»‘”
::
	$NewStub
(
chªÃl
)) {}

48 
¡d
::
¡ršg
 
	$SayH–lo
(cÚ¡ 
¡d
::
¡ršg
& 
u£r
) {

50 
H–loReque¡
 
»que¡
;

51 
»que¡
.
	`£t_Çme
(
u£r
);

54 
H–loR•ly
 
»¶y
;

58 
Cl›ÁCÚ‹xt
 
cÚ‹xt
;

62 
Com¶‘iÚQueue
 
cq
;

65 
Stus
 
¡©us
;

71 
¡d
::
unique_±r
<
Cl›ÁAsyncRe¥Ú£R—d”
<
H–loR•ly
> > 
	`½c
(

72 
¡ub_
->
	`P»·»AsyncSayH–lo
(&
cÚ‹xt
, 
»que¡
, &
cq
));

75 
½c
->
	`S¹C®l
();

80 
½c
->
	`Fšish
(&
»¶y
, &
¡©us
, (*)1);

81 * 
gÙ_g
;

82 
boŞ
 
ok
 = 
çl£
;

86 
	`GPR_ASSERT
(
cq
.
	`Next
(&
gÙ_g
, &
ok
));

90 
	`GPR_ASSERT
(
gÙ_g
 == (*)1);

93 
	`GPR_ASSERT
(
ok
);

96 ià(
¡©us
.
	`ok
()) {

97  
»¶y
.
	`mes§ge
();

101 
	}
}

103 
	g´iv©e
:

106 
¡d
::
unique_±r
<
G»‘”
::
Stub
> 
¡ub_
;

109 
	$maš
(
¬gc
, ** 
¬gv
) {

114 
G»‘”Cl›Á
 
	`g»‘”
(
g½c
::
	`C»©eChªÃl
(

115 "loÿlho¡:50051", 
g½c
::
	`In£cu»ChªÃlC»d’tŸls
()));

116 
¡d
::
¡ršg
 
	`u£r
("world");

117 
¡d
::
¡ršg
 
»¶y
 = 
g»‘”
.
	`SayH–lo
(
u£r
);

118 
¡d
::
cout
 << "G»‘”„eûived: " << 
»¶y
 << std::
’dl
;

121 
	}
}

	@src/greeter_async_server.cc

19 
	~<memÜy
>

20 
	~<io¡»am
>

21 
	~<¡ršg
>

22 
	~<th»ad
>

24 
	~<g½ıp/g½ıp.h
>

25 
	~<g½c/suµÜt/log.h
>

27 #ifdeà
BAZEL_BUILD


28 
	~"´Ùos/h–lowÜld.g½c.pb.h
"

30 
	~"h–lowÜld.g½c.pb.h
"

33 
usšg
 
	gg½c
::
S”v”
;

34 
usšg
 
	gg½c
::
S”v”AsyncRe¥Ú£Wr™”
;

35 
usšg
 
	gg½c
::
S”v”Bud”
;

36 
usšg
 
	gg½c
::
S”v”CÚ‹xt
;

37 
usšg
 
	gg½c
::
S”v”Com¶‘iÚQueue
;

38 
usšg
 
	gg½c
::
Stus
;

39 
usšg
 
	gh–lowÜld
::
H–loReque¡
;

40 
usšg
 
	gh–lowÜld
::
H–loR•ly
;

41 
usšg
 
	gh–lowÜld
::
G»‘”
;

43 şas 
	cS”v”Im¶
 
	mfš®
 {

44 
	mpublic
:

45 ~
	$S”v”Im¶
() {

46 
£rv”_
->
	`Shutdown
();

48 
cq_
->
	`Shutdown
();

52 
	$Run
() {

53 
¡d
::
¡ršg
 
	`£rv”_add»ss
("0.0.0.0:50051");

55 
S”v”Bud”
 
bud”
;

57 
bud”
.
	`AddLi¡’šgPÜt
(
£rv”_add»ss
, 
g½c
::
	`In£cu»S”v”C»d’tŸls
());

60 
bud”
.
	`Regi¡”S”viû
(&
£rviû_
);

63 
cq_
 = 
bud”
.
	`AddCom¶‘iÚQueue
();

65 
£rv”_
 = 
bud”
.
	`BudAndS¹
();

66 
¡d
::
cout
 << "S”v”†i¡’šg oÀ" << 
£rv”_add»ss
 << std::
’dl
;

69 
	`HªdËRpcs
();

70 
	}
}

72 
	g´iv©e
:

74 şas 
	cC®lD©a
 {

75 
public
:

79 
C®lD©a
(
G»‘”
::
AsyncS”viû
* 
£rviû
, 
S”v”Com¶‘iÚQueue
* 
cq
)

80 : 
£rviû_
(
£rviû
), 
cq_
(
cq
), 
»¥Úd”_
(&
ùx_
), 
¡©us_
(
CREATE
) {

82 
Proûed
();

85 
Proûed
() {

86 ià(
	g¡©us_
 =ğ
CREATE
) {

88 
¡©us_
 = 
PROCESS
;

95 
	g£rviû_
->
Reque¡SayH–lo
(&
ùx_
, &
»que¡_
, &
»¥Úd”_
, 
cq_
, cq_,

96 
this
);

97 } ià(
	g¡©us_
 =ğ
PROCESS
) {

101 
Ãw
 
C®lD©a
(
£rviû_
, 
cq_
);

104 
	g¡d
::
¡ršg
 
´efix
("Hello ");

105 
	g»¶y_
.
£t_mes§ge
(
´efix
 + 
»que¡_
.
Çme
());

110 
	g¡©us_
 = 
FINISH
;

111 
	g»¥Úd”_
.
Fšish
(
»¶y_
, 
Stus
::
OK
, 
this
);

113 
GPR_ASSERT
(
¡©us_
 =ğ
FINISH
);

115 
d–‘e
 
	gthis
;

119 
	g´iv©e
:

122 
G»‘”
::
AsyncS”viû
* 
£rviû_
;

124 
S”v”Com¶‘iÚQueue
* 
	gcq_
;

128 
S”v”CÚ‹xt
 
	gùx_
;

131 
H–loReque¡
 
	g»que¡_
;

133 
H–loR•ly
 
	g»¶y_
;

136 
	gS”v”AsyncRe¥Ú£Wr™”
<
	gH–loR•ly
> 
	g»¥Úd”_
;

139 
	eC®lStus
 { 
	gCREATE
, 
	gPROCESS
, 
	gFINISH
 };

140 
C®lStus
 
	g¡©us_
;

144 
	$HªdËRpcs
() {

146 
Ãw
 
	`C®lD©a
(&
£rviû_
, 
cq_
.
	`g‘
());

147 * 
g
;

148 
boŞ
 
ok
;

149 
Œue
) {

155 
	`GPR_ASSERT
(
cq_
->
	`Next
(&
g
, &
ok
));

156 
	`GPR_ASSERT
(
ok
);

157 
¡©ic_ÿ¡
<
C®lD©a
*>(
g
)->
	`Proûed
();

159 
	}
}

161 
	g¡d
::
unique_±r
<
S”v”Com¶‘iÚQueue
> 
cq_
;

162 
	gG»‘”
::
AsyncS”viû
 
£rviû_
;

163 
	g¡d
::
unique_±r
<
S”v”
> 
£rv”_
;

166 
	$maš
(
¬gc
, ** 
¬gv
) {

167 
S”v”Im¶
 
£rv”
;

168 
£rv”
.
	`Run
();

171 
	}
}

	@src/greeter_client.cc

19 
	~<io¡»am
>

20 
	~<memÜy
>

21 
	~<¡ršg
>

23 
	~<g½ıp/g½ıp.h
>

25 #ifdeà
BAZEL_BUILD


26 
	~"´Ùos/h–lowÜld.g½c.pb.h
"

28 
	~"h–lowÜld.g½c.pb.h
"

31 
usšg
 
	gg½c
::
ChªÃl
;

32 
usšg
 
	gg½c
::
Cl›ÁCÚ‹xt
;

33 
usšg
 
	gg½c
::
Stus
;

34 
usšg
 
	gh–lowÜld
::
G»‘”
;

35 
usšg
 
	gh–lowÜld
::
H–loR•ly
;

36 
usšg
 
	gh–lowÜld
::
H–loReque¡
;

38 şas 
	cG»‘”Cl›Á
 {

39 
	mpublic
:

40 
G»‘”Cl›Á
(
¡d
::
sh¬ed_±r
<
ChªÃl
> 
chªÃl
)

41 : 
¡ub_
(
G»‘”
::
	$NewStub
(
chªÃl
)) {}

45 
¡d
::
¡ršg
 
	$SayH–lo
(cÚ¡ 
¡d
::
¡ršg
& 
u£r
) {

47 
H–loReque¡
 
»que¡
;

48 
»que¡
.
	`£t_Çme
(
u£r
);

51 
H–loR•ly
 
»¶y
;

55 
Cl›ÁCÚ‹xt
 
cÚ‹xt
;

58 
Stus
 
¡©us
 = 
¡ub_
->
	`SayH–lo
(&
cÚ‹xt
, 
»que¡
, &
»¶y
);

61 ià(
¡©us
.
	`ok
()) {

62  
»¶y
.
	`mes§ge
();

64 
¡d
::
cout
 << 
¡©us
.
	`”rÜ_code
(è<< ": " << stus.
	`”rÜ_mes§ge
()

65 << 
¡d
::
’dl
;

68 
	}
}

70 
	g¡d
::
¡ršg
 
	$SayH–loAgaš
(cÚ¡ 
¡d
::
¡ršg
& 
u£r
) {

72 
H–loReque¡
 
»que¡
;

73 
»que¡
.
	`£t_Çme
(
u£r
);

74 
H–loR•ly
 
»¶y
;

75 
Cl›ÁCÚ‹xt
 
cÚ‹xt
;

78 
Stus
 
¡©us
 = 
¡ub_
->
	`SayH–loAgaš
(&
cÚ‹xt
, 
»que¡
, &
»¶y
);

79 ià(
¡©us
.
	`ok
()) {

80  
»¶y
.
	`mes§ge
();

82 
¡d
::
cout
 << 
¡©us
.
	`”rÜ_code
(è<< ": " << stus.
	`”rÜ_mes§ge
()

83 << 
¡d
::
’dl
;

86 
	}
}

88 
	g´iv©e
:

89 
¡d
::
unique_±r
<
G»‘”
::
Stub
> 
¡ub_
;

92 
	$maš
(
¬gc
, ** 
¬gv
) {

93 
¡d
::
¡ršg
 
add»ss
 = "localhost";

94 
¡d
::
¡ršg
 
pÜt
 = "50051";

95 
¡d
::
¡ršg
 
£rv”_add»ss
 = 
add»ss
 + ":" + 
pÜt
;

96 
¡d
::
cout
 << "Cl›Á qu”yšg s”v”‡dd»ss: " << 
£rv”_add»ss
 << std::
’dl
;

103 
G»‘”Cl›Á
 
	`g»‘”
(
g½c
::
	`C»©eChªÃl
(

104 
£rv”_add»ss
, 
g½c
::
	`In£cu»ChªÃlC»d’tŸls
()));

105 
¡d
::
¡ršg
 
	`u£r
("world");

107 
¡d
::
¡ršg
 
»¶y
 = 
g»‘”
.
	`SayH–lo
(
u£r
);

108 
¡d
::
cout
 << "G»‘”„eûived: " << 
»¶y
 << std::
’dl
;

110 
»¶y
 = 
g»‘”
.
	`SayH–loAgaš
(
u£r
);

111 
¡d
::
cout
 << "G»‘”„eûived: " << 
»¶y
 << std::
’dl
;

114 
	}
}

	@src/greeter_server.cc

19 
	~<io¡»am
>

20 
	~<memÜy
>

21 
	~<¡ršg
>

23 
	~<g½ıp/g½ıp.h
>

25 #ifdeà
BAZEL_BUILD


26 
	~"´Ùos/h–lowÜld.g½c.pb.h
"

28 
	~"h–lowÜld.g½c.pb.h
"

31 
usšg
 
	gg½c
::
S”v”
;

32 
usšg
 
	gg½c
::
S”v”Bud”
;

33 
usšg
 
	gg½c
::
S”v”CÚ‹xt
;

34 
usšg
 
	gg½c
::
Stus
;

35 
usšg
 
	gh–lowÜld
::
H–loReque¡
;

36 
usšg
 
	gh–lowÜld
::
H–loR•ly
;

37 
usšg
 
	gh–lowÜld
::
G»‘”
;

40 şas 
	cG»‘”S”viûIm¶
 
	mfš®
 : 
public
 
G»‘”
::
S”viû
 {

41 
Stus
 
	$SayH–lo
(
S”v”CÚ‹xt
* 
cÚ‹xt
, cÚ¡ 
H–loReque¡
* 
»que¡
,

42 
H–loR•ly
* 
»¶y
è
ov”ride
 {

43 
¡d
::
¡ršg
 
	`´efix
("Hello ");

44 
»¶y
->
	`£t_mes§ge
(
´efix
 + 
»que¡
->
	`Çme
());

45  
Stus
::
OK
;

48 
Stus
 
	$SayH–loAgaš
(
S”v”CÚ‹xt
* 
cÚ‹xt
, cÚ¡ 
H–loReque¡
* 
»que¡
,

49 
H–loR•ly
* 
»¶y
è
ov”ride
 {

50 
¡d
::
¡ršg
 
	`´efix
("Hello‡gain ");

51 
»¶y
->
	`£t_mes§ge
(
´efix
 + 
»que¡
->
	`Çme
());

52  
Stus
::
OK
;

53 
	}
}

56 
	$RunS”v”
() {

57 
¡d
::
¡ršg
 
add»ss
 = "0.0.0.0";

58 
¡d
::
¡ršg
 
pÜt
 = "50051";

59 
¡d
::
¡ršg
 
£rv”_add»ss
 = 
add»ss
 + ":" + 
pÜt
;

60 
G»‘”S”viûIm¶
 
£rviû
;

62 
S”v”Bud”
 
bud”
;

64 
bud”
.
	`AddLi¡’šgPÜt
(
£rv”_add»ss
, 
g½c
::
	`In£cu»S”v”C»d’tŸls
());

67 
bud”
.
	`Regi¡”S”viû
(&
£rviû
);

69 
¡d
::
unique_±r
<
S”v”
> 
	`£rv”
(
bud”
.
	`BudAndS¹
());

70 
¡d
::
cout
 << "S”v”†i¡’šg oÀ" << 
£rv”_add»ss
 << std::
’dl
;

74 
£rv”
->
	`Wa™
();

75 
	}
}

77 
	$maš
(
¬gc
, ** 
¬gv
) {

78 
	`RunS”v”
();

81 
	}
}

	@src/include/graph.h

1 #´agm¨
Úû


3 
Çme¥aû
 
	gG¿phQu”yEngše
 {

5 şas 
	cG¿ph
 {

7 
	gpublic
:

8 ~
G¿ph
() = ;

9 şas 
	cEdge
 {

10 
	gpublic
:

11 
Edge
(
š_¤c
, 
š_de¡
)

12 :
¤c
(
š_¤c
), 
de¡
(
š_de¡
){}

13 
	g¤c
;

14 
	gde¡
;

16 ~
Edge
() = ;

	@
1
.
0
7
165
greeter_async_client2.cc
src/async_client.cc
src/greeter_async_client.cc
src/greeter_async_server.cc
src/greeter_client.cc
src/greeter_server.cc
src/include/graph.h
